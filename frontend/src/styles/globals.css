@import "tailwindcss";

/* Self-hosted accessibility fonts */
@font-face {
  font-family: 'OpenDyslexic';
  src: url('/fonts/OpenDyslexic-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'OpenDyslexic';
  src: url('/fonts/OpenDyslexic-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/*
 * AiLine Design Tokens — WCAG AAA Persona Themes (ADR-008, ADR-019, ADR-031)
 *
 * Theme switching: document.body.setAttribute('data-theme', id)
 * No React re-render — pure CSS custom property swap.
 *
 * 9 personas: standard, high-contrast, tea, tdah, dyslexia,
 *             low-vision, hearing, motor, screen-reader
 */

@theme {
  --color-bg: var(--color-bg);
  --color-text: var(--color-text);
  --color-primary: var(--color-primary);
  --color-primary-hover: var(--color-primary-hover);
  --color-secondary: var(--color-secondary);
  --color-success: var(--color-success);
  --color-warning: var(--color-warning);
  --color-error: var(--color-error);
  --color-surface: var(--color-surface);
  --color-surface-elevated: var(--color-surface-elevated);
  --color-border: var(--color-border);
  --color-muted: var(--color-muted);
  --color-on-primary: var(--color-on-primary);
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --shadow-sm: var(--shadow-sm);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --persona-font: var(--persona-font);
  --persona-radius: var(--persona-radius);
  --persona-content-padding: var(--persona-content-padding);
  --persona-card-gap: var(--persona-card-gap);
  --persona-max-items-row: var(--persona-max-items-row);
  --persona-transition-scale: var(--persona-transition-scale);
  --persona-touch-gap: var(--persona-touch-gap);
}

/* ===== 1. STANDARD (Default) ===== */
[data-theme="standard"],
:root {
  --color-bg: #FFFFFF;
  --color-text: #1A1A2E;
  --color-primary: #2563EB;
  --color-primary-hover: #1D4ED8;
  --color-secondary: #7C3AED;
  --color-success: #059669;
  --color-warning: #D97706;
  --color-error: #DC2626;
  --color-surface: #F8FAFC;
  --color-surface-elevated: #F1F5F9;
  --color-border: #E2E8F0;
  --color-muted: #64748B;
  --color-on-primary: #FFFFFF;
  --radius-sm: 6px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --font-size-base: 16px;
  --line-height-base: 1.6;
  --spacing-unit: 4px;
  --focus-ring: 0 0 0 3px rgba(37, 99, 235, 0.5);
  --min-target-size: 44px;
  --font-weight-body: 400;
  --letter-spacing-body: 0em;
  --word-spacing-body: 0em;
  /* Elevation tokens */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04), 0 1px 3px rgba(0, 0, 0, 0.06);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.06), 0 2px 4px -2px rgba(0, 0, 0, 0.04);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.04);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 8px 10px -6px rgba(0, 0, 0, 0.03);
  --shadow-glow: 0 0 20px -5px var(--color-primary);
  /* Transition tokens */
  --transition-fast: 150ms ease;
  --transition-normal: 300ms ease;
  --transition-slow: 500ms ease;
  --transition-bounce: cubic-bezier(0.22, 1, 0.36, 1);
  /* Gradient tokens */
  --gradient-hero: linear-gradient(135deg, #2563EB 0%, #7C3AED 100%);
  --gradient-surface: linear-gradient(180deg, var(--color-surface) 0%, var(--color-bg) 100%);
  --gradient-card-hover: radial-gradient(ellipse at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(37, 99, 235, 0.08) 0%, transparent 70%);
  --gradient-border: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
  /* Glass effect */
  --glass-bg: rgba(255, 255, 255, 0.72);
  --glass-blur: blur(16px);
  --glass-border: rgba(255, 255, 255, 0.18);
  /* Persona geometry tokens */
  --persona-font: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --persona-radius: 12px;
  --persona-content-padding: 1.5rem;
  --persona-card-gap: 1rem;
  --persona-max-items-row: 4;
  --persona-transition-scale: 1;
  --persona-touch-gap: 0.5rem;
}

/* ===== 2. HIGH CONTRAST ===== */
/* WCAG AAA: 19:1 ratio minimum. Pure black/white with vivid accents. */
[data-theme="high-contrast"] {
  --color-bg: #000000;
  --color-text: #FFFFFF;
  --color-primary: #5EEAD4;
  --color-primary-hover: #99F6E4;
  --color-secondary: #C084FC;
  --color-success: #4ADE80;
  --color-warning: #FBBF24;
  --color-error: #F87171;
  --color-surface: #0A0A0A;
  --color-surface-elevated: #171717;
  --color-border: #525252;
  --color-muted: #A3A3A3;
  --color-on-primary: #000000;
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --font-size-base: 18px;
  --line-height-base: 1.8;
  --spacing-unit: 6px;
  --focus-ring: 0 0 0 4px #FBBF24;
  --min-target-size: 48px;
  --font-weight-body: 500;
  --letter-spacing-body: 0.02em;
  --word-spacing-body: 0em;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.35), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.45), 0 8px 10px -6px rgba(0, 0, 0, 0.3);
  --transition-fast: 150ms ease;
  --transition-normal: 300ms ease;
  --transition-slow: 500ms ease;
  --gradient-hero: linear-gradient(135deg, #5EEAD4 0%, #C084FC 100%);
  --gradient-surface: linear-gradient(180deg, #0A0A0A 0%, #000000 100%);
  --glass-bg: rgba(10, 10, 10, 0.8);
  --glass-blur: blur(12px);
  --glass-border: rgba(82, 82, 82, 0.3);
  /* Persona geometry tokens */
  --persona-font: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --persona-radius: 0px;
  --persona-content-padding: 1.875rem;
  --persona-card-gap: 1.25rem;
  --persona-max-items-row: 3;
  --persona-transition-scale: 1;
  --persona-touch-gap: 0.75rem;
}

/* ===== 3. TEA (Autism Spectrum) ===== */
/* Calm blues/greens, reduced visual noise, predictable layout. */
[data-theme="tea"] {
  --color-bg: #F0F7F4;
  --color-text: #1B3A33;
  --color-primary: #2D8B6E;
  --color-primary-hover: #247058;
  --color-secondary: #4A7C8F;
  --color-success: #3D9970;
  --color-warning: #C4841D;
  --color-error: #C0392B;
  --color-surface: #E8F3EE;
  --color-surface-elevated: #D5EAE1;
  --color-border: #B8D5CA;
  --color-muted: #5F8A7C;
  --color-on-primary: #FFFFFF;
  --radius-sm: 8px;
  --radius-md: 14px;
  --radius-lg: 20px;
  --font-size-base: 17px;
  --line-height-base: 1.8;
  --spacing-unit: 6px;
  --focus-ring: 0 0 0 3px rgba(45, 139, 110, 0.5);
  --min-target-size: 48px;
  --font-weight-body: 400;
  --letter-spacing-body: 0.01em;
  --word-spacing-body: 0.05em;
  --shadow-sm: 0 1px 2px 0 rgba(27, 58, 51, 0.06);
  --shadow-md: 0 4px 6px -1px rgba(27, 58, 51, 0.08), 0 2px 4px -2px rgba(27, 58, 51, 0.05);
  --shadow-lg: 0 10px 15px -3px rgba(27, 58, 51, 0.1), 0 4px 6px -4px rgba(27, 58, 51, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(27, 58, 51, 0.1), 0 8px 10px -6px rgba(27, 58, 51, 0.05);
  --transition-fast: 200ms ease;
  --transition-normal: 400ms ease;
  --transition-slow: 600ms ease;
  --gradient-hero: linear-gradient(135deg, #2D8B6E 0%, #4A7C8F 100%);
  --gradient-surface: linear-gradient(180deg, #E8F3EE 0%, #F0F7F4 100%);
  --glass-bg: rgba(240, 247, 244, 0.75);
  --glass-blur: blur(12px);
  --glass-border: rgba(184, 213, 202, 0.3);
  /* Persona geometry tokens */
  --persona-font: 'IBM Plex Mono', 'Courier New', monospace;
  --persona-radius: 4px;
  --persona-content-padding: 2.25rem;
  --persona-card-gap: 1.5rem;
  --persona-max-items-row: 3;
  --persona-transition-scale: 0;
  --persona-touch-gap: 1rem;
}

/* ===== 4. TDAH (ADHD) ===== */
/* Structured sections, clear visual hierarchy, reduced distractions. */
[data-theme="tdah"] {
  --color-bg: #FFFDF7;
  --color-text: #2D2A24;
  --color-primary: #E07E34;
  --color-primary-hover: #C96A1F;
  --color-secondary: #6B5CE7;
  --color-success: #22A867;
  --color-warning: #E8A317;
  --color-error: #E63946;
  --color-surface: #FFF8EE;
  --color-surface-elevated: #FFF0DD;
  --color-border: #E8D5B8;
  --color-muted: #8B7E6A;
  --color-on-primary: #FFFFFF;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --font-size-base: 17px;
  --line-height-base: 1.7;
  --spacing-unit: 6px;
  --focus-ring: 0 0 0 4px rgba(224, 126, 52, 0.5);
  --min-target-size: 48px;
  --font-weight-body: 500;
  --letter-spacing-body: 0.01em;
  --word-spacing-body: 0.05em;
  --shadow-sm: 0 1px 2px 0 rgba(45, 42, 36, 0.06);
  --shadow-md: 0 4px 6px -1px rgba(45, 42, 36, 0.08), 0 2px 4px -2px rgba(45, 42, 36, 0.05);
  --shadow-lg: 0 10px 15px -3px rgba(45, 42, 36, 0.1), 0 4px 6px -4px rgba(45, 42, 36, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(45, 42, 36, 0.1), 0 8px 10px -6px rgba(45, 42, 36, 0.05);
  --transition-fast: 150ms ease;
  --transition-normal: 300ms ease;
  --transition-slow: 500ms ease;
  --gradient-hero: linear-gradient(135deg, #E07E34 0%, #6B5CE7 100%);
  --gradient-surface: linear-gradient(180deg, #FFF8EE 0%, #FFFDF7 100%);
  --glass-bg: rgba(255, 253, 247, 0.75);
  --glass-blur: blur(12px);
  --glass-border: rgba(232, 213, 184, 0.3);
  /* Persona geometry tokens */
  --persona-font: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --persona-radius: 16px;
  --persona-content-padding: 1.25rem;
  --persona-card-gap: 0.75rem;
  --persona-max-items-row: 4;
  --persona-transition-scale: 0.8;
  --persona-touch-gap: 0.5rem;
}

/* ===== 5. DYSLEXIA ===== */
/* Wider spacing, heavier weight, warm tones, no justified text. */
[data-theme="dyslexia"] {
  --color-bg: #FBF5E6;
  --color-text: #2C2416;
  --color-primary: #3B7DD8;
  --color-primary-hover: #2E63AD;
  --color-secondary: #9B59B6;
  --color-success: #27AE60;
  --color-warning: #D4A017;
  --color-error: #C0392B;
  --color-surface: #F5EDDA;
  --color-surface-elevated: #EDE3C9;
  --color-border: #D5C8A8;
  --color-muted: #7A6D55;
  --color-on-primary: #FFFFFF;
  --radius-sm: 8px;
  --radius-md: 14px;
  --radius-lg: 18px;
  --font-size-base: 18px;
  --line-height-base: 2.0;
  --spacing-unit: 6px;
  --focus-ring: 0 0 0 3px rgba(59, 125, 216, 0.5);
  --min-target-size: 48px;
  --font-weight-body: 500;
  --letter-spacing-body: 0.08em;
  --word-spacing-body: 0.16em;
  --shadow-sm: 0 1px 2px 0 rgba(44, 36, 22, 0.06);
  --shadow-md: 0 4px 6px -1px rgba(44, 36, 22, 0.08), 0 2px 4px -2px rgba(44, 36, 22, 0.05);
  --shadow-lg: 0 10px 15px -3px rgba(44, 36, 22, 0.1), 0 4px 6px -4px rgba(44, 36, 22, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(44, 36, 22, 0.1), 0 8px 10px -6px rgba(44, 36, 22, 0.05);
  --transition-fast: 200ms ease;
  --transition-normal: 400ms ease;
  --transition-slow: 600ms ease;
  --gradient-hero: linear-gradient(135deg, #3B7DD8 0%, #9B59B6 100%);
  --gradient-surface: linear-gradient(180deg, #F5EDDA 0%, #FBF5E6 100%);
  --glass-bg: rgba(251, 245, 230, 0.75);
  --glass-blur: blur(12px);
  --glass-border: rgba(213, 200, 168, 0.3);
  /* Persona geometry tokens */
  --persona-font: 'OpenDyslexic', system-ui, sans-serif;
  --persona-radius: 8px;
  --persona-content-padding: 1.8rem;
  --persona-card-gap: 1.2rem;
  --persona-max-items-row: 3;
  --persona-transition-scale: 1;
  --persona-touch-gap: 0.75rem;
}

/* ===== 6. LOW VISION ===== */
/* 20px+ base, high contrast, large targets, bold weight. */
[data-theme="low-vision"] {
  --color-bg: #FFFEF5;
  --color-text: #1A1400;
  --color-primary: #1A56DB;
  --color-primary-hover: #143DAE;
  --color-secondary: #6D28D9;
  --color-success: #057A55;
  --color-warning: #C27803;
  --color-error: #B91C1C;
  --color-surface: #FFF9E0;
  --color-surface-elevated: #FFF3C4;
  --color-border: #D4C97E;
  --color-muted: #5C5526;
  --color-on-primary: #FFFFFF;
  --radius-sm: 8px;
  --radius-md: 14px;
  --radius-lg: 20px;
  --font-size-base: 22px;
  --line-height-base: 1.8;
  --spacing-unit: 8px;
  --focus-ring: 0 0 0 5px rgba(26, 86, 219, 0.6);
  --min-target-size: 56px;
  --font-weight-body: 600;
  --letter-spacing-body: 0.03em;
  --word-spacing-body: 0.08em;
  --shadow-sm: 0 1px 3px 0 rgba(26, 20, 0, 0.08);
  --shadow-md: 0 4px 8px -1px rgba(26, 20, 0, 0.1), 0 2px 4px -2px rgba(26, 20, 0, 0.06);
  --shadow-lg: 0 10px 20px -3px rgba(26, 20, 0, 0.12), 0 4px 8px -4px rgba(26, 20, 0, 0.06);
  --shadow-xl: 0 20px 30px -5px rgba(26, 20, 0, 0.14), 0 8px 12px -6px rgba(26, 20, 0, 0.06);
  --transition-fast: 200ms ease;
  --transition-normal: 400ms ease;
  --transition-slow: 600ms ease;
  --gradient-hero: linear-gradient(135deg, #1A56DB 0%, #6D28D9 100%);
  --gradient-surface: linear-gradient(180deg, #FFF9E0 0%, #FFFEF5 100%);
  --glass-bg: rgba(255, 254, 245, 0.8);
  --glass-blur: blur(12px);
  --glass-border: rgba(212, 201, 126, 0.3);
  /* Persona geometry tokens */
  --persona-font: 'Atkinson Hyperlegible', system-ui, sans-serif;
  --persona-radius: 0px;
  --persona-content-padding: 2.25rem;
  --persona-card-gap: 1.5rem;
  --persona-max-items-row: 2;
  --persona-transition-scale: 1.2;
  --persona-touch-gap: 1rem;
}

/* ===== 7. HEARING (Deaf / Hard of Hearing) ===== */
/* Visual emphasis: icons, borders, color cues replace audio feedback. */
[data-theme="hearing"] {
  --color-bg: #F8F9FE;
  --color-text: #1E1E3A;
  --color-primary: #4338CA;
  --color-primary-hover: #3730A3;
  --color-secondary: #D946EF;
  --color-success: #16A34A;
  --color-warning: #EA580C;
  --color-error: #E11D48;
  --color-surface: #EEF0FA;
  --color-surface-elevated: #E0E4F5;
  --color-border: #C7CCE5;
  --color-muted: #64658B;
  --color-on-primary: #FFFFFF;
  --radius-sm: 6px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --font-size-base: 17px;
  --line-height-base: 1.7;
  --spacing-unit: 5px;
  --focus-ring: 0 0 0 4px rgba(67, 56, 202, 0.5);
  --min-target-size: 48px;
  --font-weight-body: 500;
  --letter-spacing-body: 0.01em;
  --word-spacing-body: 0em;
  --shadow-sm: 0 1px 2px 0 rgba(30, 30, 58, 0.06);
  --shadow-md: 0 4px 6px -1px rgba(30, 30, 58, 0.08), 0 2px 4px -2px rgba(30, 30, 58, 0.05);
  --shadow-lg: 0 10px 15px -3px rgba(30, 30, 58, 0.1), 0 4px 6px -4px rgba(30, 30, 58, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(30, 30, 58, 0.1), 0 8px 10px -6px rgba(30, 30, 58, 0.05);
  --transition-fast: 150ms ease;
  --transition-normal: 300ms ease;
  --transition-slow: 500ms ease;
  --gradient-hero: linear-gradient(135deg, #4338CA 0%, #D946EF 100%);
  --gradient-surface: linear-gradient(180deg, #EEF0FA 0%, #F8F9FE 100%);
  --glass-bg: rgba(248, 249, 254, 0.75);
  --glass-blur: blur(12px);
  --glass-border: rgba(199, 204, 229, 0.3);
  /* Persona geometry tokens */
  --persona-font: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --persona-radius: 12px;
  --persona-content-padding: 1.5rem;
  --persona-card-gap: 1rem;
  --persona-max-items-row: 4;
  --persona-transition-scale: 1;
  --persona-touch-gap: 0.5rem;
}

/* ===== 8. MOTOR (Physical / Motor Impairment) ===== */
/* Large click targets, simple interactions, generous padding. */
[data-theme="motor"] {
  --color-bg: #FAFBFF;
  --color-text: #1C1C3A;
  --color-primary: #3B82F6;
  --color-primary-hover: #2563EB;
  --color-secondary: #A855F7;
  --color-success: #22C55E;
  --color-warning: #F59E0B;
  --color-error: #EF4444;
  --color-surface: #F0F2FF;
  --color-surface-elevated: #E2E6FC;
  --color-border: #CBD2F0;
  --color-muted: #6B6FA0;
  --color-on-primary: #FFFFFF;
  --radius-sm: 10px;
  --radius-md: 16px;
  --radius-lg: 24px;
  --font-size-base: 18px;
  --line-height-base: 1.7;
  --spacing-unit: 8px;
  --focus-ring: 0 0 0 5px rgba(59, 130, 246, 0.6);
  --min-target-size: 56px;
  --font-weight-body: 500;
  --letter-spacing-body: 0.01em;
  --word-spacing-body: 0.05em;
  --shadow-sm: 0 1px 2px 0 rgba(28, 28, 58, 0.06);
  --shadow-md: 0 4px 6px -1px rgba(28, 28, 58, 0.08), 0 2px 4px -2px rgba(28, 28, 58, 0.05);
  --shadow-lg: 0 10px 15px -3px rgba(28, 28, 58, 0.1), 0 4px 6px -4px rgba(28, 28, 58, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(28, 28, 58, 0.1), 0 8px 10px -6px rgba(28, 28, 58, 0.05);
  --transition-fast: 200ms ease;
  --transition-normal: 400ms ease;
  --transition-slow: 600ms ease;
  --gradient-hero: linear-gradient(135deg, #3B82F6 0%, #A855F7 100%);
  --gradient-surface: linear-gradient(180deg, #F0F2FF 0%, #FAFBFF 100%);
  --glass-bg: rgba(250, 251, 255, 0.75);
  --glass-blur: blur(12px);
  --glass-border: rgba(203, 210, 240, 0.3);
  /* Persona geometry tokens */
  --persona-font: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --persona-radius: 24px;
  --persona-content-padding: 2.25rem;
  --persona-card-gap: 1.5rem;
  --persona-max-items-row: 3;
  --persona-transition-scale: 1.5;
  --persona-touch-gap: 1rem;
}

/* ===== 9. SCREEN READER ===== */
/* Semantic structure, skip links visible on focus, minimal visual chrome. */
[data-theme="screen-reader"] {
  --color-bg: #FFFFFF;
  --color-text: #111827;
  --color-primary: #1D4ED8;
  --color-primary-hover: #1E40AF;
  --color-secondary: #6D28D9;
  --color-success: #047857;
  --color-warning: #B45309;
  --color-error: #B91C1C;
  --color-surface: #F9FAFB;
  --color-surface-elevated: #F3F4F6;
  --color-border: #D1D5DB;
  --color-muted: #6B7280;
  --color-on-primary: #FFFFFF;
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --font-size-base: 18px;
  --line-height-base: 1.8;
  --spacing-unit: 4px;
  --focus-ring: 0 0 0 4px rgba(29, 78, 216, 0.7);
  --min-target-size: 48px;
  --font-weight-body: 400;
  --letter-spacing-body: 0.01em;
  --word-spacing-body: 0em;
  --shadow-sm: 0 1px 2px 0 rgba(17, 24, 39, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(17, 24, 39, 0.07), 0 2px 4px -2px rgba(17, 24, 39, 0.05);
  --shadow-lg: 0 10px 15px -3px rgba(17, 24, 39, 0.08), 0 4px 6px -4px rgba(17, 24, 39, 0.04);
  --shadow-xl: 0 20px 25px -5px rgba(17, 24, 39, 0.08), 0 8px 10px -6px rgba(17, 24, 39, 0.04);
  --transition-fast: 150ms ease;
  --transition-normal: 300ms ease;
  --transition-slow: 500ms ease;
  --gradient-hero: linear-gradient(135deg, #1D4ED8 0%, #6D28D9 100%);
  --gradient-surface: linear-gradient(180deg, #F9FAFB 0%, #FFFFFF 100%);
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-blur: blur(12px);
  --glass-border: rgba(209, 213, 219, 0.3);
  /* Persona geometry tokens */
  --persona-font: system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --persona-radius: 20px;
  --persona-content-padding: 2.1rem;
  --persona-card-gap: 1.4rem;
  --persona-max-items-row: 3;
  --persona-transition-scale: 1.2;
  --persona-touch-gap: 0.875rem;
}

/* ===== BASE STYLES ===== */

html {
  font-size: var(--font-size-base, 16px);
}

body {
  background-color: var(--color-bg);
  color: var(--color-text);
  line-height: var(--line-height-base);
  font-weight: var(--font-weight-body);
  letter-spacing: var(--letter-spacing-body);
  word-spacing: var(--word-spacing-body);
  font-family: var(--persona-font, system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: background-color 500ms ease, color 500ms ease;
}

/* Focus styles — WCAG AAA compliant */
:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
  border-radius: var(--radius-sm);
}

/* Skip-to-content link (visible on focus for keyboard users) */
.skip-link {
  position: absolute;
  top: -100%;
  left: 16px;
  z-index: 9999;
  padding: 12px 24px;
  background-color: var(--color-primary);
  color: var(--color-on-primary);
  border-radius: var(--radius-md);
  font-weight: 600;
  text-decoration: none;
  transition: top 0.15s ease;
}

.skip-link:focus {
  top: 16px;
}

/* Minimum interactive target size */
button,
a,
input,
select,
textarea,
[role="button"],
[role="tab"],
[role="menuitem"] {
  min-height: var(--min-target-size, 44px);
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ===== PERSONA-SPECIFIC UX ADAPTATIONS ===== */

/*
 * Each persona theme applies meaningful behavioral changes beyond colors.
 * These adaptations are grounded in evidence-based accessibility research.
 */

/* --- DYSLEXIA: wider spacing, no justified text, left-align everything --- */
[data-theme="dyslexia"] * {
  text-align: left !important;
}

[data-theme="dyslexia"] p,
[data-theme="dyslexia"] li,
[data-theme="dyslexia"] span,
[data-theme="dyslexia"] label,
[data-theme="dyslexia"] td {
  letter-spacing: 0.12em !important;
  word-spacing: 0.16em !important;
  line-height: 2.0 !important;
}

/* --- ADHD (TDAH): spotlight active element, reduce visual noise --- */
[data-theme="tdah"] aside,
[data-theme="tdah"] [role="complementary"] {
  opacity: 0.7;
  transition: opacity 0.3s ease;
}

[data-theme="tdah"] aside:hover,
[data-theme="tdah"] aside:focus-within,
[data-theme="tdah"] [role="complementary"]:hover,
[data-theme="tdah"] [role="complementary"]:focus-within {
  opacity: 1;
}

[data-theme="tdah"] *:focus-within {
  position: relative;
  z-index: 1;
}

/* Active paragraph spotlight for ADHD */
[data-theme="tdah"] p:hover,
[data-theme="tdah"] li:hover {
  background-color: color-mix(in srgb, var(--color-primary) 8%, transparent);
  border-radius: var(--radius-sm);
}

/* --- AUTISM (TEA): Replace red errors with calming blue, no surprise popups --- */
[data-theme="tea"] {
  --color-error: #2E7D8C;
}

/* Disable unexpected animations and popups for autism persona */
[data-theme="tea"] [data-gamification],
[data-theme="tea"] [data-celebration] {
  display: none !important;
}

/* Smoother, slower transitions for predictability */
[data-theme="tea"] * {
  transition-duration: 400ms !important;
}

/* No shake animations for autism */
[data-theme="tea"] .animate-shake,
[data-theme="tea"] [class*="shake"] {
  animation: none !important;
}

/* --- MOTOR: Larger touch targets, generous spacing --- */
[data-theme="motor"] button,
[data-theme="motor"] a,
[data-theme="motor"] input,
[data-theme="motor"] select,
[data-theme="motor"] textarea,
[data-theme="motor"] [role="button"],
[data-theme="motor"] [role="tab"],
[data-theme="motor"] [role="menuitem"],
[data-theme="motor"] [role="radio"] {
  min-height: 56px !important;
  min-width: 56px !important;
  padding: 12px 16px !important;
}

[data-theme="motor"] .gap-2 {
  gap: 12px !important;
}

[data-theme="motor"] .gap-3 {
  gap: 16px !important;
}

/* --- HEARING: Visual indicators for audio, high-contrast borders --- */
[data-theme="hearing"] [aria-live] {
  border-left: 4px solid var(--color-primary);
  padding-left: 12px;
}

[data-theme="hearing"] [role="alert"] {
  border: 2px solid var(--color-error);
  padding: 12px;
}

[data-theme="hearing"] [role="status"] {
  border: 2px solid var(--color-primary);
  padding: 8px;
}

/* --- LOW VISION: Extra large, bold, high contrast --- */
[data-theme="low-vision"] h1,
[data-theme="low-vision"] h2,
[data-theme="low-vision"] h3 {
  font-weight: 800 !important;
}

[data-theme="low-vision"] p,
[data-theme="low-vision"] li,
[data-theme="low-vision"] span {
  font-weight: 600 !important;
}

[data-theme="low-vision"] button,
[data-theme="low-vision"] a {
  text-decoration: underline;
  text-underline-offset: 4px;
}

/* --- SCREEN READER: show skip links and landmark outlines --- */
[data-theme="screen-reader"] .skip-link {
  top: 16px;
}

[data-theme="screen-reader"] nav,
[data-theme="screen-reader"] main,
[data-theme="screen-reader"] [role="complementary"],
[data-theme="screen-reader"] header {
  outline: 2px dashed var(--color-border);
  outline-offset: 4px;
}

/* ===== USER-CONTROLLED REDUCED MOTION ===== */
/* Applied via data-reduced-motion attribute on body (from accessibility store) */
[data-reduced-motion="true"] *,
[data-reduced-motion="true"] *::before,
[data-reduced-motion="true"] *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* ===== GLASS EFFECT UTILITY ===== */
.glass {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
}

/* Persona degradation: no glass/blur for TEA, low-vision, motor personas */
[data-theme="tea"] .glass,
[data-theme="low-vision"] .glass,
[data-theme="motor"] .glass {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
}

[data-theme="high-contrast"] .glass {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  box-shadow: inset 0 1px 0 0 rgba(255, 255, 255, 0.06);
}

/* ===== GRADIENT SHIFT (Landing Hero) ===== */
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ===== SHIMMER / SKELETON LOADING ===== */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-surface-elevated) 25%,
    var(--color-border) 50%,
    var(--color-surface-elevated) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: var(--radius-md);
}

/* ===== GRADIENT TEXT ===== */
.gradient-text {
  background: var(--gradient-hero);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ===== PERSONA GEOMETRY UTILITIES ===== */
/* Consume theme geometry tokens for adaptive layouts */

.persona-grid {
  display: grid;
  gap: var(--persona-card-gap, 1rem);
  grid-template-columns: repeat(auto-fill, minmax(min(100%, calc(100% / var(--persona-max-items-row, 4))), 1fr));
}

.persona-section {
  padding: var(--persona-content-padding, 1.5rem);
  border-radius: var(--persona-radius, 12px);
  font-family: var(--persona-font, system-ui);
}

.persona-interactive-group {
  gap: var(--persona-touch-gap, 0.5rem);
}

/* ===== PRINT STYLESHEET ===== */
@media print {
  .skip-link,
  nav,
  aside,
  header,
  [aria-label="Mobile navigation"],
  button:not([data-print]),
  .glass-box-panel {
    display: none !important;
  }

  main {
    padding: 0 !important;
    margin: 0 !important;
    overflow: visible !important;
  }

  body {
    background: white !important;
    color: black !important;
    font-size: 12pt !important;
    line-height: 1.5 !important;
  }

  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }

  a {
    text-decoration: underline;
    color: black !important;
  }

  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    break-after: avoid;
  }

  article, section, li {
    page-break-inside: avoid;
    break-inside: avoid;
  }
}

/* ===== View Transitions API ===== */

/* Default cross-fade for route changes */
@view-transition {
  navigation: auto;
}

::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 200ms;
  animation-timing-function: ease-out;
}

/* Main content morph transition */
main#main-content {
  view-transition-name: main-content;
}

::view-transition-old(main-content) {
  animation: fade-out-slide 200ms ease-out forwards;
}

::view-transition-new(main-content) {
  animation: fade-in-slide 200ms ease-out forwards;
}

@keyframes fade-out-slide {
  from { opacity: 1; transform: translateY(0); }
  to { opacity: 0; transform: translateY(-4px); }
}

@keyframes fade-in-slide {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== Theme Morph — Circular Reveal ===== */
/* When data-vt-type="theme", use a clip-path circle expanding from click origin */
html[data-vt-type="theme"]::view-transition-old(root) {
  animation: theme-fade-out 350ms ease-in forwards;
  z-index: 1;
}

html[data-vt-type="theme"]::view-transition-new(root) {
  animation: theme-reveal 500ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
  z-index: 2;
  clip-path: circle(0% at var(--vt-x, 50%) var(--vt-y, 50%));
}

@keyframes theme-fade-out {
  from { opacity: 1; }
  to { opacity: 0.3; }
}

@keyframes theme-reveal {
  from {
    clip-path: circle(0% at var(--vt-x, 50%) var(--vt-y, 50%));
  }
  to {
    clip-path: circle(150% at var(--vt-x, 50%) var(--vt-y, 50%));
  }
}

/* Theme transition: also morph the main content */
html[data-vt-type="theme"]::view-transition-old(main-content) {
  animation: none;
  mix-blend-mode: normal;
}

html[data-vt-type="theme"]::view-transition-new(main-content) {
  animation: none;
  mix-blend-mode: normal;
}

/* Disable transitions when user prefers reduced motion */
@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(root),
  ::view-transition-new(root),
  ::view-transition-old(main-content),
  ::view-transition-new(main-content) {
    animation: none !important;
    clip-path: none !important;
  }
}

/* ===== FLOAT ANIMATION (Hero Decorative Elements) ===== */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}
.animate-float-slow { animation: float 8s ease-in-out infinite; }
.animate-float-medium { animation: float 6s ease-in-out infinite reverse; }

/* ===== HERO TITLE GRADIENT (White shimmer on hero bg) ===== */
.hero-title-gradient {
  background: linear-gradient(90deg, #fff 0%, rgba(255,255,255,0.7) 40%, #fff 60%, rgba(255,255,255,0.7) 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: hero-title-shimmer 6s ease-in-out infinite;
}
@keyframes hero-title-shimmer {
  0% { background-position: 0% center; }
  50% { background-position: 200% center; }
  100% { background-position: 0% center; }
}

/* ===== HERO ORB GLOW PULSE ===== */
@keyframes hero-orb-glow {
  0%, 100% { opacity: 0.4; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.15); }
}
.animate-hero-orb-glow { animation: hero-orb-glow 3s ease-in-out infinite; }

/* ===== BADGE GLOW (Built with badge) ===== */
.badge-glow {
  box-shadow: 0 0 0 1px var(--color-border), 0 0 16px -4px rgba(204, 120, 92, 0.25);
  transition: box-shadow var(--transition-normal);
}
.badge-glow:hover {
  box-shadow: 0 0 0 1px var(--color-border), 0 0 24px -2px rgba(204, 120, 92, 0.45);
}

/* ===== RING PULSE (Wizard Active Step) ===== */
@keyframes ring-pulse {
  0% { transform: scale(1); opacity: 0.5; }
  100% { transform: scale(2.5); opacity: 0; }
}
.animate-ring-pulse { animation: ring-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }

/* ===== CARD HOVER UTILITY ===== */
.card-hover {
  transition: transform var(--transition-normal), box-shadow var(--transition-normal);
  transition-timing-function: var(--transition-bounce);
}
.card-hover:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }

/* ===== BUTTON SHIMMER ===== */
.btn-shimmer { position: relative; overflow: hidden; isolation: isolate; }
.btn-shimmer::after {
  content: '';
  position: absolute;
  inset: 0;
  z-index: -1;
  transform: translateX(-100%);
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
  transition: transform 1s ease-in-out;
}
.btn-shimmer:hover::after { transform: translateX(100%); }

/* ===== BUTTON PRESS FEEDBACK ===== */
.btn-press:active { transform: scale(0.97); }

/* ===== INPUT FOCUS RING ===== */
.input-focus-ring { outline: none; transition: border-color 0.2s ease, box-shadow 0.2s ease; }
.input-focus-ring:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 4px color-mix(in srgb, var(--color-primary) 10%, transparent);
}

/* ===== COUNT-UP NUMBER INTERPOLATION (CSS @property for animated stats) ===== */
@property --num {
  syntax: "<integer>";
  initial-value: 0;
  inherits: false;
}
.count-up {
  transition: --num 1.5s var(--transition-bounce);
  counter-reset: num var(--num);
}
.count-up::after { content: counter(num); }

/* ===== HERO NOISE / GRAIN TEXTURE OVERLAY ===== */
.hero-noise { position: relative; isolation: isolate; }
.hero-noise::before {
  content: '';
  position: absolute;
  inset: 0;
  z-index: -1;
  opacity: 0.035;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E") repeat;
  background-size: 256px;
  pointer-events: none;
  border-radius: inherit;
}

/* ===== CSS @PROPERTY FOR ANIMATIONS ===== */
@property --angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

/* ===== ANIMATED MESH GRADIENT HERO ===== */
.mesh-gradient-hero {
  background-image:
    radial-gradient(at 20% 30%, color-mix(in srgb, var(--color-primary) 25%, transparent) 0px, transparent 50%),
    radial-gradient(at 80% 20%, color-mix(in srgb, var(--color-secondary) 20%, transparent) 0px, transparent 50%),
    radial-gradient(at 50% 80%, color-mix(in srgb, var(--color-primary) 15%, transparent) 0px, transparent 50%);
  background-size: 180% 180%;
  animation: mesh-breath 12s ease-in-out infinite alternate;
}

@keyframes mesh-breath {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 50% 100%; }
}

/* ===== ROTATING GRADIENT BORDER (Glass Cards) ===== */
.gradient-border-glass {
  position: relative;
  z-index: 1;
}
.gradient-border-glass::before {
  content: '';
  position: absolute;
  inset: -1.5px;
  z-index: -1;
  background: conic-gradient(from var(--angle), transparent 25%, var(--color-primary), var(--color-secondary), var(--color-primary), transparent 75%);
  border-radius: inherit;
  animation: rotate-border 4s linear infinite;
  opacity: 0;
  transition: opacity 0.4s ease;
}
.gradient-border-glass:hover::before {
  opacity: 0.7;
}

@keyframes rotate-border {
  to { --angle: 360deg; }
}

/* ===== GRADIENT ANIMATED TEXT ===== */
.gradient-text-animated {
  background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-secondary) 50%, var(--color-primary) 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: text-shimmer 4s ease-in-out infinite;
}

@keyframes text-shimmer {
  to { background-position: 200% center; }
}

/* ===== ICON ORB WITH 3D DEPTH ===== */
.icon-orb {
  border-radius: 14px;
  box-shadow: inset 0 2px 4px rgba(255,255,255,0.3), 0 4px 12px color-mix(in srgb, var(--color-primary) 30%, transparent);
}

/* ===== EMPTY STATE ORBIT ANIMATION ===== */
@keyframes spin-orbit {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
.empty-state-orbit {
  transform-origin: center;
  animation: spin-orbit 12s linear infinite;
}
.empty-state-pulse-scale {
  animation: pulse-scale 3s ease-in-out infinite;
}
@keyframes pulse-scale {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.2); opacity: 1; }
}

/* ===== PERSONA BREATHING ANIMATION (TEA loading state) ===== */
@keyframes persona-breathe {
  0%, 100% { opacity: 0.4; transform: scale(0.9); }
  50% { opacity: 0.9; transform: scale(1.1); }
}
.animate-persona-breathe {
  animation: persona-breathe 3s ease-in-out infinite;
}

/* ===== REDUCED MOTION: All Custom Animations ===== */
@media (prefers-reduced-motion: reduce) {
  .animate-float-slow,
  .animate-float-medium,
  .animate-ring-pulse,
  .animate-persona-breathe,
  .btn-shimmer::after {
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
  .card-hover,
  .input-focus-ring,
  .count-up { transition: none !important; }
  .card-hover:hover { transform: none !important; }
  .mesh-gradient-hero,
  .gradient-border-glass::before,
  .gradient-text-animated,
  .hero-title-gradient,
  .animate-hero-orb-glow,
  .empty-state-orbit,
  .empty-state-pulse-scale {
    animation: none !important;
    transition: none !important;
  }
  .gradient-text-animated {
    -webkit-text-fill-color: var(--color-primary);
  }
  .hero-title-gradient {
    -webkit-text-fill-color: #fff;
  }
}

/* ===== PERSONA DEGRADATION: Disable Decorative Motion ===== */
/* TEA (autism), MOTOR, LOW VISION: no decorative animation */
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) :is(.animate-float-slow, .animate-float-medium, .animate-ring-pulse) {
  animation: none !important;
  transform: none !important;
}
/* Persona-breathe is intentionally allowed for TEA (calm UX), but disabled for motor/low-vision */
:is([data-theme="motor"], [data-theme="low-vision"]) .animate-persona-breathe {
  animation: none !important;
  transform: none !important;
}
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) .card-hover:hover {
  transform: none !important;
}
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) .btn-shimmer::after {
  transition: none !important;
  transform: none !important;
}
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) .count-up {
  transition: none !important;
}
:is([data-theme="tea"], [data-theme="low-vision"]) .hero-noise::before {
  display: none;
}
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) :is(.mesh-gradient-hero, .gradient-border-glass::before, .gradient-text-animated, .hero-title-gradient, .animate-hero-orb-glow, .empty-state-orbit, .empty-state-pulse-scale) {
  animation: none !important;
  transform: none !important;
}
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) .gradient-text-animated {
  -webkit-text-fill-color: var(--color-primary);
}
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) .hero-title-gradient {
  -webkit-text-fill-color: #fff;
}

/* ===== PREMIUM CSS UTILITIES (Sprint 17 — State-of-the-Art) ===== */

/* === 1. Aurora AI Thinking Gradient === */
.aurora-thinking {
  background: linear-gradient(-45deg,
    color-mix(in srgb, var(--color-primary) 60%, transparent),
    color-mix(in srgb, var(--color-secondary) 50%, transparent),
    color-mix(in srgb, var(--color-success) 40%, transparent),
    color-mix(in srgb, var(--color-primary) 60%, transparent)
  );
  background-size: 400% 400%;
  animation: aurora-shift 3s ease infinite;
  border-radius: 50%;
  filter: blur(20px);
}

@keyframes aurora-shift {
  0% { background-position: 0% 50%; opacity: 0.6; }
  50% { background-position: 100% 50%; opacity: 1; }
  100% { background-position: 0% 50%; opacity: 0.6; }
}

/* === 2. Neon Glow Ring (for score gauges) === */
.neon-glow-ring {
  filter: blur(6px);
  opacity: 0.5;
}

/* === 3. Blur-in Page Transition === */
@keyframes blur-in {
  from { opacity: 0; filter: blur(8px); transform: translateY(12px); }
  to { opacity: 1; filter: blur(0px); transform: translateY(0); }
}

.animate-blur-in {
  animation: blur-in 0.5s cubic-bezier(0.22, 1, 0.36, 1) both;
}

/* === 4. Glass Chat Bubble === */
.glass-bubble {
  background: color-mix(in srgb, var(--color-surface-elevated) 85%, transparent);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid color-mix(in srgb, var(--color-border) 50%, transparent);
}

.glass-bubble-ai {
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--color-primary) 5%, var(--color-surface-elevated)),
    color-mix(in srgb, var(--color-secondary) 3%, var(--color-surface-elevated))
  );
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid color-mix(in srgb, var(--color-primary) 10%, var(--color-border));
}

/* === 5. 3D Perspective Tilt Container === */
.perspective-tilt {
  perspective: 800px;
  transform-style: preserve-3d;
}

/* === 6. Stagger Blur-in for Children === */
.stagger-blur-in > * {
  animation: blur-in 0.4s cubic-bezier(0.22, 1, 0.36, 1) both;
}

.stagger-blur-in > *:nth-child(1) { animation-delay: 0.05s; }
.stagger-blur-in > *:nth-child(2) { animation-delay: 0.1s; }
.stagger-blur-in > *:nth-child(3) { animation-delay: 0.15s; }
.stagger-blur-in > *:nth-child(4) { animation-delay: 0.2s; }
.stagger-blur-in > *:nth-child(5) { animation-delay: 0.25s; }
.stagger-blur-in > *:nth-child(6) { animation-delay: 0.3s; }
.stagger-blur-in > *:nth-child(7) { animation-delay: 0.35s; }
.stagger-blur-in > *:nth-child(8) { animation-delay: 0.4s; }

/* ===== REDUCED MOTION: Premium Utilities ===== */
@media (prefers-reduced-motion: reduce) {
  .aurora-thinking,
  .animate-blur-in,
  .stagger-blur-in > * {
    animation: none !important;
    filter: none !important;
    opacity: 1 !important;
  }
}

/* ===== PERSONA DEGRADATION: Premium Utilities ===== */
/* Disable animations for TEA, motor, low-vision */
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) :is(.aurora-thinking, .animate-blur-in, .stagger-blur-in > *) {
  animation: none !important;
  filter: none !important;
  opacity: 1 !important;
}

/* Disable backdrop-filter for glass bubbles on accessibility personas */
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) :is(.glass-bubble, .glass-bubble-ai) {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  background: var(--color-surface-elevated) !important;
  border: 1px solid var(--color-border) !important;
}

/* ===== AURORA GLOW (Feature Cards Background) ===== */
.aurora-glow {
  position: relative;
  isolation: isolate;
}
.aurora-glow::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 120%;
  height: 120%;
  border-radius: 50%;
  opacity: 0;
  z-index: -1;
  transition: opacity 0.5s ease;
  background: radial-gradient(
    ellipse at center,
    color-mix(in srgb, var(--color-primary) 12%, transparent) 0%,
    color-mix(in srgb, var(--color-secondary) 6%, transparent) 40%,
    transparent 70%
  );
  filter: blur(30px);
  pointer-events: none;
}
.aurora-glow:hover::before {
  opacity: 1;
}

/* ===== BORDER BEAM (Moving gradient border for CTAs) ===== */
@property --beam-angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}
.border-beam {
  position: relative;
  isolation: isolate;
}
.border-beam::before {
  content: '';
  position: absolute;
  inset: -2px;
  z-index: -1;
  border-radius: inherit;
  background: conic-gradient(
    from var(--beam-angle),
    transparent 40%,
    var(--color-primary),
    var(--color-secondary),
    transparent 60%
  );
  animation: beam-rotate 3s linear infinite;
  opacity: 0.6;
}
.border-beam::after {
  content: '';
  position: absolute;
  inset: 0;
  z-index: -1;
  border-radius: inherit;
  background: inherit;
}

@keyframes beam-rotate {
  to { --beam-angle: 360deg; }
}

/* ===== REDUCED MOTION: Aurora & Border Beam ===== */
@media (prefers-reduced-motion: reduce) {
  .aurora-glow::before {
    transition: none !important;
    opacity: 0 !important;
  }
  .border-beam::before {
    animation: none !important;
    opacity: 0.3 !important;
  }
}

/* ===== PERSONA DEGRADATION: Aurora & Border Beam ===== */
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) .aurora-glow::before {
  display: none;
}
:is([data-theme="tea"], [data-theme="motor"], [data-theme="low-vision"]) .border-beam::before {
  animation: none !important;
  opacity: 0.2 !important;
}
